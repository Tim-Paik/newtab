<!DOCTYPE html>
<html lang="zh">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <meta name="theme-color" content="#4F4F4F" />
    <meta name="referrer" content="never" />
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <title>新标签页</title>
    <style>
        * {
            overflow: hidden;
            box-sizing: border-box;
            user-select: none;
            touch-action: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }

        html,
        body,
        #app {
            margin: 0;
            border: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #app {
            background-size: cover;
        }

        #searchForm {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 1rem;
            padding-bottom: 15%;
        }

        #switch {
            display: flex;
            flex-direction: row;
            list-style: none;
            margin: 1rem;
            padding: 0;
        }

        .switch {
            flex: auto;
            color: #ffffff;
            opacity: 0.6;
            text-shadow: 1px 1px 5px #000000, 0px 0px 1px #000000;
            transition: opacity 0.2s ease;
        }

        .switch:hover {
            opacity: 1.0 !important;
            transition: opacity 0.2s ease;
        }

        #searchBox {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08);
            height: 3.5rem;
            width: 40rem;
            display: flex;
            transition: box-shadow 0.4s ease;
        }

        #searchBox:hover {
            box-shadow: 3px 4px 11px 0 rgba(0, 0, 0, 0.32), 0 0 0 1px rgba(0, 0, 0, 0.16);
            transition: box-shadow 0.2s ease;
        }

        #searchEngine,
        #search,
        #go {
            outline: 0;
            margin: 0;
            border: 0;
            padding: 0;
            height: 100%;
            border-radius: 0;
            justify-content: center;
            align-items: center;
            flex: none;
        }

        #searchEngine {
            background: #ffffff;
            width: 10%;
            border-radius: 0.5rem 0 0 0.5rem;
            transition: background 0.4s ease;
            fill: #000000;
        }

        #searchEngine:hover {
            background: #b2dfdb;
            transition: background 0.2s ease;
        }

        #search {
            flex: 1 1 auto;
            width: 80%;
            padding: 0 1rem;
            font-size: 1rem;
        }

        #go {
            background: #26a69a;
            width: 10%;
            padding-top: 5px;
            border-radius: 0 0.5rem 0.5rem 0;
            transition: background 0.4s ease;
            fill: #ffffff;
        }

        #go:hover {
            background: #009688;
            transition: background 0.2s ease;
        }

        #go:active {
            background: #00897b;
            transition: background 0.2s ease;
        }

        @media screen and (max-width: 700px) {

            #searchEngine,
            #go {
                width: calc(10% + (700px - 100%) * 0.05);
            }

            #searchForm {
                width: 96%;
                padding-bottom: calc(15% + (700px - 100%) * 0.3);
            }

            #searchBox {
                width: 100%;
            }
        }

        @media screen and (max-width: 270px) {
            #switch {
                margin: 5% auto 5%;
            }
        }

        :root {
            --background-color: #ffffff;
            --button-color-light: #ffffff;
            --button-hover-light: #b2dfdb;
            --button-active-light: #80cbc4;
            --button-color: #26a69a;
            --button-hover: #009688;
            --button-active: #00897b;
            --text-color: #ffffff;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --background-color: #004d40;
                --button-color-light: #004d40;
                --button-hover-light: #004035;
                --button-active-light: #00332a;
                --button-color: #00594f;
                --button-hover: #00665a;
                --button-active: #004035;
                --text-color: #ffffff;
            }

            #search {
                color: #b2dfdb;
            }

            #searchEngine {
                fill: #ffffff;
            }

            #go {
                fill: #000000;
            }
        }

        .switch {
            color: var(--text-color);
        }

        #searchBox {
            background: var(--background-color);
        }

        #searchEngine {
            background: var(--button-color-light);
        }

        #searchEngine:hover {
            background: var(--button-hover-light);
        }

        #search {
            background: var(--background-color);
        }

        #go {
            background: var(--button-color);
        }

        #go:hover {
            background: var(--button-hover);
        }

        #go:active {
            background: var(--button-active);
        }
    </style>
</head>

<body>
    <div id="app">
        <div id="searchForm">
            <ul id="switch">
                <li class="switch" id="web" onclick="switchTo('web')">网页</li>
                <li class="switch" id="images" onclick="switchTo('images')">图片</li>
                <li class="switch" id="translate" onclick="switchTo('translate')">翻译</li>
                <li class="switch" id="dict" onclick="switchTo('dict')">词典</li>
                <li class="switch" id="map" onclick="switchTo('map')">地图</li>
            </ul>
            <div id="searchBox">
                <button type="button" id="searchEngine" aria-label="Switch Search Engine">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"
                        style="width: 32px; height: 32px;">
                        <path d="M5,3V19L8.72,21L18,15.82V11.73H18L9.77,8.95L11.38,12.84L13.94,14L8.7,16.92V4.27L5,3">
                        </path>
                    </svg>
                </button>
                <input type="search" id="search" placeholder="搜索..." name="q"
                    onkeypress="if(event.keyCode==13){search()}" value />
                <button type="button" id="go" onclick="search()" aria-label="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"
                        style="width: 32px; height: 32px;">
                        <path
                            d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    <script>
        var searchURL = 'https://cn.bing.com/search?q='
        //var app = 
        var searchBox = document.getElementById('searchBox')
        document.getElementById('web').style.opacity = 1.0

        document.getElementById('search').onfocus = function () {
            searchBox.style.boxShadow = '3px 4px 11px 0 rgba(0, 0, 0, 0.32), 0 0 0 1px rgba(0, 0, 0, 0.16)'
        }
        document.getElementById('search').onblur = function () {
            searchBox.style.boxShadow = '0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08)'
        }
        var fc = function () { document.getElementById('search').focus() }
        setTimeout(fc, 200)

        switchTo = function (type) {
            var ele = document.getElementsByClassName('switch')
            for (i = 0; i < ele.length; i++) {
                ele[i].style.opacity = 0.6
            }
            switch (type) {
                case 'web':
                    searchURL = 'https://cn.bing.com/search?q='
                    document.getElementById('web').style.opacity = 1.0
                    break
                case 'images':
                    searchURL = 'https://cn.bing.com/images/search?q='
                    document.getElementById('images').style.opacity = 1.0
                    break
                case 'translate':
                    searchURL = 'https://translate.google.cn/?sl=auto&tl=zh-CN&op=translate&text='
                    document.getElementById('translate').style.opacity = 1.0
                    break
                case 'dict':
                    searchURL = 'https://cn.bing.com/dict/search?q='
                    document.getElementById('dict').style.opacity = 1.0
                    break
                case 'map':
                    searchURL = 'https://ditu.amap.com/search?query='
                    document.getElementById('map').style.opacity = 1.0
                    break
            }
        }

        search = function () {
            window.location = searchURL + document.getElementById('search').value
        }

        bgimage = function (bginfo) {
            if (bginfo.status.code != 200) {
                console.log(bginfo.status.message)
                document.getElementById('app').style.background = 'center no-repeat url("https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/15175.jpg")'
                return
            }
            document.getElementById('app').style.background = 'center no-repeat url("' + bginfo.data.url + '")'
        }
    </script>
    <script src="https://bing.ioliu.cn/v1?callback=bgimage"></script>
</body>

</html>